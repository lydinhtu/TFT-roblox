local ServerScriptService = game:GetService("ServerScriptService")
local TweenService = game:GetService("TweenService") -- Cần dùng Tween thì gọi ở đây
local UnitAI = require(ServerScriptService:WaitForChild("UnitAI"))

-- 1. ĐỊNH NGHĨA KỸ NĂNG RIÊNG (Nằm gọn trong file này)
local function ChieuBanCung(npc, mucTieu, satThuong)
	-- Tạo mũi tên
	local dan = Instance.new("Part")
	dan.Name = "MuiTen"
	dan.Size = Vector3.new(0.5, 0.5, 2)
	dan.Color = Color3.fromRGB(255, 255, 0)
	dan.Anchored = true
	dan.CanCollide = false
	dan.CFrame = CFrame.new(npc.HumanoidRootPart.Position + Vector3.new(0, 1, 0), mucTieu.Position)
	dan.Parent = workspace

	-- Bay đến mục tiêu
	local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Linear)
	local tween = TweenService:Create(dan, tweenInfo, {Position = mucTieu.Position})
	tween:Play()

	tween.Completed:Connect(function()
		dan:Destroy()
		-- Gây sát thương khi trúng
		local eHum = mucTieu.Parent:FindFirstChild("Humanoid")
		if eHum then eHum:TakeDamage(satThuong) end
	end)
end

-- 2. CẤU HÌNH VÀ GỬI KỸ NĂNG CHO AI
local config = {
	AnimationID = "rbxassetid://507777826",

	-- Truyền cái hàm bên trên vào đây!
	KyNangTanCong = ChieuBanCung 
}

-- Kích hoạt
UnitAI.KhoiTao(script.Parent, config)
